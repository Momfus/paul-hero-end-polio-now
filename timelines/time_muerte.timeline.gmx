<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<timeline>
  <entry>
    <step>1</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Efecto de rotación

// La imagen rota hasta haber dado una vuelta completa, luego sigue el timeline normalmente
if ( image_angle != -360 ){ 

    image_angle -= 120; 
    timeline_position = 0;
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>3</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Inicio de la animación de muerte

effect_create_above(ef_smokeup, x,y, 1, c_orange);
    
mostrar_sprite = 1;

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>20</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Efecto flasheo rápido
efectos( 0, 2, c_white);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>25</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Reinicio de algunos objetos.
{

    mostrar_sprite = 2; // Para que no se dibuja más el fondo negro.

    // Se vuelve a mover el fondo (el que tenga)
    background_detener( false );
    
    // Se reactiva el movimiento de las trampas y plataformas móviles, también se mueven a sus coordinadas iniciales.
    volver_origen();
    activado_todo(true);
    
    with(control_general){ nivel_orbes_cantidad_actual = 0; } // Se reinicia la cantidad de orbes que tenía el jugador.

    // Si había una caja, la devuelve a la posición original.
    if( ob_punto_entrega.caja_existe == true ){
        
        instance_activate_object(ob_caja);
        
        with(ob_caja){
            
            if( plat_movil_id != 0 ){
            
                with(plat_movil_id){ move_caja = 0; }
                plat_movil_id = 0
            
            }
            
            vsp = 0;
            
            x = xstart;
            y = ystart;
               
        }
       
        ob_punto_entrega.apuntar_flecha = 1; 
    
    }
    else{

        ob_punto_entrega.apuntar_flecha = 0;     

    }
    
    // Consideración con sector extra.
    // Si se está en el sector extra (jefe final ) se toma en cuenta algunas cosas especiales.
    if( sector_actual == 6 ){
    
        with( ob_chaman_activador ){
        
            x = xstart;
            y = ystart;
            
        }
    
        with( ob_estalactita ){ if( chaman_invocadas == true ){ instance_destroy(); } }
            
        if( instance_exists( control_temblor ) ){ 
        
            with( control_temblor ){
            
                view_xview = 0;
                view_yview = 0;
                instance_destroy(); 
        
            }
         
        }
    
    }

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>30</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// De vuelta a la normalidad de la partida.
{

    instance_activate_object(ob_jug);

    // Se permite hacer pausa.
    with( control_menu_pausa ){ alarm[4] = 30; }
    
    // Se vuelve a la música principal.
    with( control_general){ alarm[2] = 10; }
        
    // Efecto para que el jugador vea que volvieron las orbes al lugar de origen.
    with(ob_orbe){ effect_create_above(ef_ellipse, x + 8, y + 8, 0, c_white); } 
    
    // Se detiene el timeline y se destruye el objeto "ob_jug_muerte"
    timeline_running = false;
    instance_destroy();
    
    

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
</timeline>
