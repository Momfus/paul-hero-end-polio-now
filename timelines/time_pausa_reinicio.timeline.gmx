<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<timeline>
  <entry>
    <step>0</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Creación del efecto / Vuelve volumen música

//---&gt; El resto
efectos(0, 2, c_white); // Se hace un flasheo en pantalla  

audio_sound_gain( control_general.musica_principal, volumen_musica, 250 ); // La música vuelve al volumen que estaba.
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>5</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Se inician los estados básicos

en_pausa = false; // Ya no se está en pausa.
            
// Antes de destruir el bojeto "surface_pausa", se borra el sprite que creo.
with( surface_pausa ){

    sprite_delete( sprite_fondo );
    instance_destroy();
                
}


// Se saca el cartel de pausa
with(ob_carteles){
        
    if( tipo == 9 ){ instance_destroy(); break; }
        
}
        
instance_activate_all();


with( ob_jug ){

    // Setear los atributos básicos del jugador.
    still_jump = true;
    
    en_aire = false;
    
    hsp = 0;
    vsp = 0;
    impulso = 0;
    
    en_escalera = false;
    can_escalera = true;
    
    can_bajar_plat = true;
    
    show_popup = 0;
    
    spr = 0;
    
    can_interac = true;
    
    accion = 0;    
    
    // Verifica si el jugador estaba sobre una plataforma móvil, en ese caso indica al mismo y a esa plataforma que ya lo está para evitar errores.
    if( plat_movil_id != 0 ){
    
        with(plat_movil_id){ move_jug = false; }
        plat_movil_id = 0;
    
    }
    
    // Se detiene el movimiento de las sierras y plataformas móviles.
    activado_todo(false);
    
    // Si existe una caja o se estaba llevando una, se vuelve a su estado inicial.
    if( object_exists(ob_caja) || con_caja == true ){
    
        // Si estaba agarrando la caja, se marca que ya no y aparece la caja en sí de nuevo.
        if( con_caja == true ){ 
    
            with(ob_caja_usando){ instance_change(ob_caja, true ); }     
            con_caja = false;
        
        }
    
        // Se posiciona en su lugar inicial.    
        with(ob_caja){
        
            if( plat_movil_id != 0 ){
            
                with(plat_movil_id){ move_caja = 0; }
                plat_movil_id = 0
            
            }
            
            vsp = 0;
        
            x = xstart;
            y = ystart;
        
        }
    
    }
    
    // Se posiciona el jugador en las coordenadas recibidas.
    x = xstart;
    y = ystart;
    
}


    
with(control_general){ nivel_orbes_cantidad_actual = 0; } // Se reinicia la cantidad de orbes que tenía el jugador.


</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>6</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Todo vuelve a sus estados originales

//Nota: esto se hace un poco despues de lo anterior para esperar que se activen todas las cosas correctamente

// Se reactiva el movimiento de las trampas y plataformas móviles, también se mueven a sus coordinadas iniciales.
volver_origen();
activado_todo(true);


// Efecto para que el jugador vea que volvieron las orbes al lugar de origen.
with(ob_orbe){ effect_create_above(ef_ellipse, x + 8, y + 8, 0, c_white); } 

// Se permite hacer pausa de nuevo en menos de un segundo y se detiene el timeline
alarm[4] = 10; 
menu_opcion = 0;

timeline_running = false;

// Si se está en el sector extra (jefe final ) se toma en cuenta algunas cosas especiales.
if( sector_actual == 6 ){

    with( ob_chaman_activador ){
    
        x = xstart;
        y = ystart;
        
    }
    
    with( ob_estalactita ){ if( chaman_invocadas == true ){ instance_destroy(); } }
    
    if( instance_exists( control_temblor ) ){ 
    
        with( control_temblor ){
        
            event_perform( ev_alarm, 0 );
        
        }
    }

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
</timeline>
