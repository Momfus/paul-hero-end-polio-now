<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_plat_movil</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>8</depth>
  <persistent>0</persistent>
  <parentName>parent_plat_movil</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Movimiento
{
    
    if ( activado == true ){

        // Si tiene el ID del jugador asignado (distinto de cero sería), entonces primero se mueve el jugador.
        if ( move_jug != 0 ){
        
            with(move_jug){ 
            
                y += plat_movil_id.vsp;
                
                // Si el jugador esta llevando la caja, el encargado de moverla es esta plataforma para evitar errorres visuales.
                if( con_caja == true and instance_exists(ob_caja_usando) ){
                
                    ob_caja_usando.y = y - 48;
                    ob_caja_usando.x = x - 16;
                
                }
               
            }
            
        
        }
        
        /* Si tiene el ID de la caja (si hay) asignado (distinto de cero sería), entonces se mueve este antes de la plataforma móvil (sucede cuando
        el jugador no está llevando la caja.*/
        if ( move_caja != 0 ){
        
            with(move_caja){ y += plat_movil_id.vsp; }
        
        }
        
        // Se mueve verticalmente en la dirección indicada en "vsp" (velocidad horizontal).
        y += vsp;
        
        
        /* Se verifica si la velocidad del objeto no es cero, de ser así se detecta si hay algun "ob_stop_movil" y va desacelerando, caso contario
        comienza a acelerar en la dirección opuesta a la que venia. Si la velocidad es cero, cambia de dirección.*/
        if( vsp != 0 ){
        
            var signo_vel_v = sign(vsp); // Variable local para saber en que dirección venía el jugador.   
            
            
            // Se detecta si en la distancia que necesita para detenerse completamente, hay un "ob_stop_movil", si es asi.,.comienza a detenerse.
            if( place_meeting( x, y + signo_vel_v * abs(distancia_actualizada), ob_stop_movil )  ){
            
                vsp += -ace;
                distancia_actualizada += vsp; 
            }
            else{
            
                // Comienza a acelerar.
                if( vsp != max_v ){ vsp += ace; }
            
            }
            
    
        }
        else{
            
            // Se hacen los cambios de variables necesarias para que el objeto vaya en sentido opuesto al que venía.
            max_v = -max_v;
            ace = -ace;
            vsp = ace;
            distancia_actualizada = dis_des_v * sign(vsp) * (-1);
        
        }

    }
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>32,32</point>
  </PhysicsShapePoints>
</object>
